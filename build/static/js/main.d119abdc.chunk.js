(window["webpackJsonpaas-frontend"]=window["webpackJsonpaas-frontend"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(36),c=n.n(o),l=(n(50),n(51),n(52),n(37)),u=n(38),i=new(function(){function e(){Object(l.a)(this,e),this.authenticated=void 0,this.authenticated=!1}return Object(u.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){localStorage.clear(),this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}()),s=n(14),m=n.n(s),d=n(9);function f(){return localStorage.getItem("user")?r.a.createElement("div",{id:"userbutton",className:"headerbutton"},r.a.createElement("p",null,localStorage.getItem("user"))):r.a.createElement("a",{id:"loginbutton",className:"headerbutton",href:"/login"},r.a.createElement("p",null,"Login"))}var p=Object(d.g)((function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:m.a,alt:"AAS logo",className:"logo"})),r.a.createElement("a",{id:"aboutbutton",className:"headerbutton",href:"/about"},r.a.createElement("p",null,"About")),r.a.createElement("button",{className:"headerbutton",onClick:function(){i.logout((function(){e.history.push("/login")}))}},"Logout"),r.a.createElement(f,null))})),g=n(10),h=n.n(g),b=n(13),E=n(12),v=n(44),O=(n(58),n(15)),w=n.n(O),y=function(){var e=Object(a.useState)([]),t=Object(E.a)(e,2),n=t[0],o=t[1];Object(a.useEffect)((function(){c()}),[]);var c=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({url:"http://localhost:8000/alert/all/",method:"GET",headers:{Authorization:"Token "+localStorage.getItem("token")}}).then((function(e){var t=l(e.data);o(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].fields);return t};return r.a.createElement(v.a,{columns:[{Header:"Timestamp",accessor:"start_time"},{Header:"Alert ID",accessor:"alert_id"},{Header:"Source",accessor:"source"},{Header:"Netbox",accessor:"netbox"}],data:n})},j=(n(30),Object(d.g)((function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(p,null)),r.a.createElement("div",{className:"table"},r.a.createElement(y,null)))}))),k=(n(76),n(41));function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){Object(k.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={user:localStorage.getItem("user"),token:localStorage.getItem("token"),loggedIn:!!localStorage.getItem("user")},N=r.a.createContext(I);function P(e,t){switch(t.type){case"setUser":return x({},e,{user:t.payload});case"setToken":case"setLogin":return x({},e,{token:t.payload});default:return I}}var A=function(e){var t=Object(a.useState)(""),n=Object(E.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(""),u=Object(E.a)(l,2),s=u[0],d=u[1],f=Object(a.useContext)(N).dispatch,p=function(){var t=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,g();case 3:localStorage.getItem("token")&&i.login((function(){e.history.push("/")}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w()({url:"http://127.0.0.1:8000/api-token-auth/",method:"POST",data:{username:o,password:s}}).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",e.data.token?o:"null"),localStorage.setItem("loggedin",e.data.token?"true":"false"),f({type:"setUser",payload:o}),f({type:"setToken",payload:e.data.token}),f({type:"setLoggedin",payload:!!e.data.token})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login-container"},r.a.createElement("img",{className:"login-logo",src:m.a,alt:"logo"}),r.a.createElement("h1",{className:"login-header"},"Login"),r.a.createElement("form",{onSubmit:p,className:"login-form"},r.a.createElement("div",null,r.a.createElement("input",{name:"username",value:o,placeholder:"Email",onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{name:"password",type:"password",value:s,placeholder:"Password",onChange:function(e){return d(e.target.value)}})),r.a.createElement("button",{type:"submit"}," Log in")),r.a.createElement("a",{className:"login-feide",href:"http://localhost:8000/login/dataporten/"},"login with feide"))))},D=n(42),L=function(e){var t=e.component,n=Object(D.a)(e,["component"]);return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return i.isAuthenticated()||"true"===localStorage.getItem("loggedin")?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},T=(n(77),n(78),n(79),n(43)),C=n.n(T),H=(n(99),Object(d.g)((function(e){return r.a.createElement("div",null,r.a.createElement(p,null),r.a.createElement(C.a,null))}))),_=function(){return r.a.createElement("div",null,r.a.createElement(d.d,null,r.a.createElement(L,{exact:!0,path:"/",component:j}),r.a.createElement(L,{exact:!0,path:"/notification-profile",component:H}),r.a.createElement(d.b,{path:"/login",component:A}),r.a.createElement(d.b,{path:"*",component:function(){return r.a.createElement("h1",null,"404 not found")}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(11);c.a.render(r.a.createElement(B.a,null,r.a.createElement((function(e){var t=r.a.useReducer(P,I),n=Object(E.a)(t,2),a={state:n[0],dispatch:n[1]};return r.a.createElement(N.Provider,{value:a},e.children)}),null,r.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},14:function(e,t,n){e.exports=n.p+"static/media/logo_white.4fecb7a7.svg"},30:function(e,t,n){},45:function(e,t,n){e.exports=n(100)},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){}},[[45,1,2]]]);
//# sourceMappingURL=main.d119abdc.chunk.js.map